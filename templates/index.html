{% extends "base.html" %}

{% block content %}
<div class="container mt-4">
    <!-- Hero Section -->
    <div class="row mb-5">
        <div class="col-12">
            <div class="text-center py-5">
                <h1 class="display-4 mb-3">
                    <i class="fas fa-briefcase text-primary me-3"></i>
                    Job Application Assistant
                </h1>
                <p class="lead text-muted">
                    AI-powered tools to enhance your job applications with customized resumes, 
                    compelling cover letters, and interview preparation.
                </p>
            </div>
        </div>
    </div>

    <!-- Profile Section -->
    {% if show_profile or not profile %}
    <div class="row mb-5">
        <div class="col-12">
            <div class="card">
                <div class="card-header">
                    <h3 class="card-title mb-0">
                        <i class="fas fa-user me-2"></i>Your Profile
                    </h3>
                </div>
                <div class="card-body">
                    <!-- Resume Upload Section -->
                    <div class="mb-4">
                        <div class="card border-primary">
                            <div class="card-header bg-primary text-white">
                                <h6 class="mb-0">
                                    <i class="fas fa-upload me-2"></i>Quick Setup: Upload Your Resume
                                </h6>
                            </div>
                            <div class="card-body">
                                <p class="text-muted mb-3">Upload your resume to automatically extract all information including projects and certifications using AI.</p>
                                <form method="POST" action="{{ url_for('upload_resume') }}" enctype="multipart/form-data" class="mb-0">
                                    <div class="row align-items-end">
                                        <div class="col-md-8 mb-2">
                                            <input type="file" class="form-control" id="resume_file" name="resume_file" 
                                                   accept=".pdf,.doc,.docx,.txt" required>
                                            <div class="form-text">Accepted formats: PDF, DOC, DOCX, TXT (Max 10MB)</div>
                                        </div>
                                        <div class="col-md-4 mb-2">
                                            <button type="submit" class="btn btn-primary w-100">
                                                <i class="fas fa-magic me-2"></i>Parse Resume
                                            </button>
                                        </div>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Manual Profile Form -->
                    <h6 class="text-muted mb-3">Or fill in your information manually:</h6>
                    <form method="POST" action="{{ url_for('profile') }}">
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label for="name" class="form-label">Full Name</label>
                                <input type="text" class="form-control" id="name" name="name" 
                                       value="{{ profile.name if profile else '' }}" required>
                            </div>
                            <div class="col-md-6 mb-3">
                                <label for="email" class="form-label">Email</label>
                                <input type="email" class="form-control" id="email" name="email" 
                                       value="{{ profile.email if profile else '' }}" required>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label for="phone" class="form-label">Phone</label>
                                <input type="tel" class="form-control" id="phone" name="phone" 
                                       value="{{ profile.phone if profile else '' }}">
                            </div>
                        </div>
                        <div class="mb-3">
                            <label for="summary" class="form-label">
                                <i class="fas fa-user-tie me-1"></i>Professional Summary
                            </label>
                            <textarea class="form-control" id="summary" name="summary" rows="3" 
                                      placeholder="Brief professional summary...">{{ profile.summary if profile else '' }}</textarea>
                        </div>
                        <div class="mb-3">
                            <label for="experience" class="form-label">
                                <i class="fas fa-briefcase me-1"></i>Work Experience
                            </label>
                            <textarea class="form-control" id="experience" name="experience" rows="5" 
                                      placeholder="List your work experience with job titles, companies, dates, and responsibilities...">{{ profile.experience if profile else '' }}</textarea>
                        </div>
                        <div class="mb-3">
                            <label for="education" class="form-label">
                                <i class="fas fa-graduation-cap me-1"></i>Education
                            </label>
                            <textarea class="form-control" id="education" name="education" rows="3" 
                                      placeholder="Degrees, institutions, graduation dates...">{{ profile.education if profile else '' }}</textarea>
                        </div>
                        <div class="mb-3">
                            <label for="skills" class="form-label">
                                <i class="fas fa-code me-1"></i>Skills
                            </label>
                            <textarea class="form-control" id="skills" name="skills" rows="3" 
                                      placeholder="Technical skills, programming languages, tools, soft skills...">{{ profile.skills if profile else '' }}</textarea>
                        </div>
                        <div class="mb-3">
                            <label for="projects" class="form-label">
                                <i class="fas fa-project-diagram me-1"></i>Projects
                            </label>
                            <textarea class="form-control" id="projects" name="projects" rows="4" 
                                      placeholder="Project name, description, technologies used, your role, and key achievements...">{{ profile.projects if profile else '' }}</textarea>
                            <div class="form-text">Include personal, academic, or professional projects that demonstrate your skills</div>
                        </div>
                        <div class="mb-3">
                            <label for="certifications" class="form-label">
                                <i class="fas fa-certificate me-1"></i>Certifications
                            </label>
                            <textarea class="form-control" id="certifications" name="certifications" rows="3" 
                                      placeholder="Certification name, issuing organization, date obtained, expiration date (if any)...">{{ profile.certifications if profile else '' }}</textarea>
                            <div class="form-text">List any relevant professional certifications or licenses</div>
                        </div>
                        <button type="submit" class="btn btn-primary">
                            <i class="fas fa-save me-2"></i>Save Profile
                        </button>
                    </form>
                </div>
            </div>
        </div>
    </div>
    {% endif %}

    <!-- Features Grid -->
    <div class="row g-4 mb-5">
        <!-- Job Analysis -->
        <div class="col-md-6 col-lg-3">
            <div class="card h-100 text-center">
                <div class="card-body">
                    <i class="fas fa-search fa-3x text-primary mb-3"></i>
                    <h5 class="card-title">Analyze Job Posting</h5>
                    <p class="card-text">
                        Get detailed insights into job requirements, skills, and relevant certifications.
                    </p>
                    <a href="{{ url_for('analyze_job') }}" class="btn btn-outline-primary">
                        Start Analysis
                    </a>
                </div>
            </div>
        </div>

        <!-- Resume Customization -->
        <div class="col-md-6 col-lg-3">
            <div class="card h-100 text-center">
                <div class="card-body">
                    <i class="fas fa-file-alt fa-3x text-success mb-3"></i>
                    <h5 class="card-title">Customize Resume</h5>
                    <p class="card-text">
                        Tailor your resume with relevant projects and certifications for specific roles.
                    </p>
                    <a href="{{ url_for('customize_resume') }}" class="btn btn-outline-success">
                        Customize Now
                    </a>
                </div>
            </div>
        </div>

        <!-- Cover Letter -->
        <div class="col-md-6 col-lg-3">
            <div class="card h-100 text-center">
                <div class="card-body">
                    <i class="fas fa-envelope fa-3x text-info mb-3"></i>
                    <h5 class="card-title">Generate Cover Letter</h5>
                    <p class="card-text">
                        Create personalized cover letters highlighting your projects and achievements.
                    </p>
                    <a href="{{ url_for('generate_cover_letter') }}" class="btn btn-outline-info">
                        Generate Letter
                    </a>
                </div>
            </div>
        </div>

        <!-- Interview Prep -->
        <div class="col-md-6 col-lg-3">
            <div class="card h-100 text-center">
                <div class="card-body">
                    <i class="fas fa-question-circle fa-3x text-warning mb-3"></i>
                    <h5 class="card-title">Interview Preparation</h5>
                    <p class="card-text">
                        Practice with questions about your projects, certifications, and technical skills.
                    </p>
                    <a href="{{ url_for('interview_prep') }}" class="btn btn-outline-warning">
                        Prepare Now
                    </a>
                </div>
            </div>
        </div>
    </div>

    {% if profile %}
    <!-- Profile Summary -->
    <div class="row">
        <div class="col-12">
            <div class="card">
                <div class="card-header d-flex justify-content-between align-items-center">
                    <h5 class="mb-0">
                        <i class="fas fa-user-circle me-2"></i>Profile Summary
                    </h5>
                    <a href="{{ url_for('profile') }}" class="btn btn-sm btn-outline-secondary">
                        <i class="fas fa-edit me-1"></i>Edit
                    </a>
                </div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-md-6">
                            <p><strong>Name:</strong> {{ profile.name }}</p>
                            <p><strong>Email:</strong> {{ profile.email }}</p>
                            {% if profile.phone %}
                            <p><strong>Phone:</strong> {{ profile.phone }}</p>
                            {% endif %}
                        </div>
                        <div class="col-md-6">
                            <p><strong>Last Updated:</strong> {{ profile.updated_at.strftime('%B %d, %Y') }}</p>
                            {% if profile.projects %}
                            <p><strong>Projects:</strong> <span class="badge bg-success">Added</span></p>
                            {% endif %}
                            {% if profile.certifications %}
                            <p><strong>Certifications:</strong> <span class="badge bg-info">Added</span></p>
                            {% endif %}
                        </div>
                    </div>
                    {% if profile.summary %}
                    <div class="mt-3">
                        <strong>Summary:</strong>
                        <p class="text-muted">{{ profile.summary[:200] }}{% if profile.summary|length > 200 %}...{% endif %}</p>
                    </div>
                    {% endif %}
                    
                    <!-- Quick Stats -->
                    <div class="row mt-3">
                        <div class="col-md-12">
                            <div class="d-flex gap-3 flex-wrap">
                                <div>
                                    <i class="fas fa-briefcase text-primary me-1"></i>
                                    <small class="text-muted">Experience: {% if profile.experience %}Available{% else %}Not Set{% endif %}</small>
                                </div>
                                <div>
                                    <i class="fas fa-code text-success me-1"></i>
                                    <small class="text-muted">Skills: {% if profile.skills %}Available{% else %}Not Set{% endif %}</small>
                                </div>
                                <div>
                                    <i class="fas fa-project-diagram text-info me-1"></i>
                                    <small class="text-muted">Projects: {% if profile.projects %}Available{% else %}Not Set{% endif %}</small>
                                </div>
                                <div>
                                    <i class="fas fa-certificate text-warning me-1"></i>
                                    <small class="text-muted">Certifications: {% if profile.certifications %}Available{% else %}Not Set{% endif %}</small>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    {% endif %}
</div>
{% endblock %}
